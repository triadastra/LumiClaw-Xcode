<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="640" viewBox="0 0 1200 640" role="img" aria-labelledby="title desc">
  <title id="title">Lumi architecture overview</title>
  <desc id="desc">Layered architecture showing Presentation, App, Domain, Data, and Infrastructure with macOS and iOS clients.</desc>
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#f6fbff"/>
      <stop offset="100%" stop-color="#eef3ff"/>
    </linearGradient>
    <style>
      .title { font: 700 34px -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif; fill:#0f172a; }
      .subtitle { font: 500 16px -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif; fill:#334155; }
      .label { font: 700 15px -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif; fill:#0f172a; }
      .small { font: 500 13px -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif; fill:#334155; }
      .chip { font: 700 13px -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif; fill:#1e293b; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L9,3 L0,6 z" fill="#475569"/>
    </marker>
  </defs>

  <rect x="0" y="0" width="1200" height="640" fill="url(#bg)" rx="24"/>

  <text x="48" y="62" class="title">Lumi Architecture</text>
  <text x="48" y="90" class="subtitle">Single codebase, shared models, macOS-first runtime with iOS companion and health sync.</text>

  <rect x="48" y="124" width="220" height="88" rx="14" fill="#ffffff" stroke="#93c5fd"/>
  <text x="70" y="158" class="label">macOS App</text>
  <text x="70" y="181" class="small">Agent runtime + tools</text>
  <text x="70" y="200" class="small">Bonjour server + automation</text>

  <rect x="48" y="236" width="220" height="88" rx="14" fill="#ffffff" stroke="#86efac"/>
  <text x="70" y="270" class="label">iOS App</text>
  <text x="70" y="293" class="small">Chat + Remote + Health tab</text>
  <text x="70" y="312" class="small">Local HealthKit analysis</text>

  <line x1="278" y1="168" x2="334" y2="168" stroke="#64748b" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="278" y1="280" x2="334" y2="280" stroke="#64748b" stroke-width="2.5" marker-end="url(#arrow)"/>

  <rect x="334" y="124" width="808" height="440" rx="18" fill="#ffffff" stroke="#cbd5e1"/>

  <rect x="368" y="160" width="740" height="72" rx="12" fill="#eff6ff" stroke="#93c5fd"/>
  <text x="390" y="190" class="label">Presentation</text>
  <text x="390" y="212" class="small">SwiftUI views (Agents, Chat, Remote, Health, Settings)</text>

  <line x1="738" y1="232" x2="738" y2="252" stroke="#64748b" stroke-width="2.5" marker-end="url(#arrow)"/>

  <rect x="368" y="252" width="740" height="72" rx="12" fill="#f0fdf4" stroke="#86efac"/>
  <text x="390" y="282" class="label">App</text>
  <text x="390" y="304" class="small">AppState, Hotkeys, AutomationEngine, platform bridges</text>

  <line x1="738" y1="324" x2="738" y2="344" stroke="#64748b" stroke-width="2.5" marker-end="url(#arrow)"/>

  <rect x="368" y="344" width="740" height="72" rx="12" fill="#fff7ed" stroke="#fdba74"/>
  <text x="390" y="374" class="label">Domain</text>
  <text x="390" y="396" class="small">Models, ToolRegistry, AgentExecutionEngine, repository protocols</text>

  <line x1="738" y1="416" x2="738" y2="436" stroke="#64748b" stroke-width="2.5" marker-end="url(#arrow)"/>

  <rect x="368" y="436" width="360" height="88" rx="12" fill="#f5f3ff" stroke="#c4b5fd"/>
  <text x="390" y="468" class="label">Data</text>
  <text x="390" y="490" class="small">AIProviderRepository, AgentRepository</text>
  <text x="390" y="509" class="small">iOS Health sync DTOs + persistence</text>

  <rect x="748" y="436" width="360" height="88" rx="12" fill="#fef2f2" stroke="#fca5a5"/>
  <text x="770" y="468" class="label">Infrastructure</text>
  <text x="770" y="490" class="small">MacRemoteServer, DatabaseManager</text>
  <text x="770" y="509" class="small">Security, Audio, Network, ScreenCapture</text>

  <rect x="914" y="112" width="212" height="34" rx="16" fill="#e2e8f0"/>
  <text x="934" y="134" class="chip">JSON sync files: agents, chats, automations, settings, api keys, health_data</text>
</svg>
